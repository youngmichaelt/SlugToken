{"ast":null,"code":"var _jsxFileName = \"/Users/michaelyoung/repos/SlugToken/src/EventTable.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport styles from './EventTable.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EventTable = props => {\n  _s();\n\n  let contract = props.contract.contract;\n  let defaultAccount = props.contract.defaultAccount;\n  let provider = props.contract.provider;\n  const [Event, setEvent] = useState();\n\n  const getEvents = async () => {\n    let contractAddress = await contract.address; // let events = contract.filters.TaxCollected(null, defaultAccount);\n    // console.log(events);\n\n    let filter = contract.filters.TaxCollected(defaultAccount);\n    let events = await contract.queryFilter(filter); // console.log(events[0].args);\n\n    let rows = [];\n\n    let headers = /*#__PURE__*/_jsxDEV(\"tr\", {\n      className: \"table-fixed\",\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        className: \"px-10\",\n        children: \"Timestamp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        className: \"px-10\",\n        children: \"Transaction Hash\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        className: \"px-10\",\n        children: \"Amount\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 13\n      }, this)]\n    }, '10000', true, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 23\n    }, this); // rows.push(headers)\n\n\n    if (events instanceof Array && events.length > 0) {\n      for (let i = events.length - 1; i > -1; i--) {\n        if (i == events.length - 10) {\n          break;\n        }\n\n        let block = await provider.getBlock(events[i].blockNumber);\n        let timestamp = block.timestamp;\n        let date = new Date(timestamp * 1000);\n        let num = ethers.utils.formatUnits(events[i].args[1], 18); // console.log(num)\n\n        let fixedNum = parseFloat(num);\n        fixedNum = fixedNum.toFixed(3);\n        console.log(events[i]);\n\n        let row = /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-fixed\",\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"pt-3\",\n            children: date.toDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \" pl-10 max-w-[300px] truncate ... pt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"\",\n              href: 'https://rinkeby.etherscan.io/tx/' + events[i].transactionHash,\n              children: events[i].transactionHash\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"pl-10 pr-10 min-w-min pt-3\",\n            children: fixedNum\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 27\n        }, this); // headers += row;\n\n\n        rows.push(row);\n      }\n    } // console.log(headers);\n\n\n    setEvent(rows);\n  };\n\n  useEffect(() => {\n    if (contract != null) {\n      getEvents();\n    } else {\n      setEvent(\"null\");\n    }\n  }, [contract, defaultAccount]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 bg-white  rounded-xl border border-gray-200 \",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"flex justify-center table-fixed\",\n      id: styles.eventtable,\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        className: \" table-fixed\",\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-fixed\",\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-10\",\n            children: \"Timestamp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-10\",\n            children: \"Transaction Hash\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-10\",\n            children: \"Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this)]\n        }, '10000', true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this), Event]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EventTable, \"w1Jmtdo93NqHPHag04mJeBN3QY0=\");\n\n_c = EventTable;\nexport default EventTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"EventTable\");","map":{"version":3,"sources":["/Users/michaelyoung/repos/SlugToken/src/EventTable.js"],"names":["React","useState","useEffect","ethers","styles","EventTable","props","contract","defaultAccount","provider","Event","setEvent","getEvents","contractAddress","address","filter","filters","TaxCollected","events","queryFilter","rows","headers","Array","length","i","block","getBlock","blockNumber","timestamp","date","Date","num","utils","formatUnits","args","fixedNum","parseFloat","toFixed","console","log","row","toDateString","transactionHash","push","eventtable"],"mappings":"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","sourcesContent":["import {React, useState, useEffect} from 'react'\nimport {ethers} from 'ethers'\nimport styles from './EventTable.module.css'\n\n\nconst EventTable = (props) => {\n    let contract = props.contract.contract;\n    let defaultAccount = props.contract.defaultAccount;\n    let provider = props.contract.provider;\n    const [Event, setEvent] = useState();\n\n    const getEvents = async () => {\n        let contractAddress = await contract.address;\n\n        // let events = contract.filters.TaxCollected(null, defaultAccount);\n        // console.log(events);\n\n        let filter = contract.filters.TaxCollected(defaultAccount)\n\n        let events = await contract.queryFilter(filter);\n        // console.log(events[0].args);\n\n        let rows = []\n\n        let headers = <tr className='table-fixed' key='10000'>\n            <th className='px-10'>Timestamp</th>\n            <th className='px-10'>Transaction Hash</th>\n            <th className='px-10'>Amount</th>\n            \n        </tr>\n\n        // rows.push(headers)\n\n        if (events instanceof Array && events.length > 0){\n            for (let i = events.length-1; i > -1; i--){\n\n                if (i == events.length-10){\n                    break;\n                }\n                let block = await provider.getBlock(events[i].blockNumber);\n                let timestamp = block.timestamp;\n                let date = new Date(timestamp*1000)\n\n                let num = ethers.utils.formatUnits(events[i].args[1], 18)\n                // console.log(num)\n                let fixedNum = parseFloat(num);\n                fixedNum = fixedNum.toFixed(3);\n                \n                \n                console.log(events[i]);\n                let row = <tr className='table-fixed' key={i}>\n                    <td className='pt-3'>{date.toDateString()}</td>\n                    <td className=' pl-10 max-w-[300px] truncate ... pt-3'>\n                        <a className='' href={'https://rinkeby.etherscan.io/tx/'+events[i].transactionHash}>{events[i].transactionHash}</a>\n                    </td>\n                    <td className='pl-10 pr-10 min-w-min pt-3'>{fixedNum}</td>\n                    \n                </tr>\n                // headers += row;\n                rows.push(row);\n            }\n        }\n        // console.log(headers);\n        setEvent(rows);\n    }\n\n    useEffect(() =>{\n        if (contract != null){\n            getEvents();\n        } else {\n            setEvent(\"null\");\n        }\n    },[contract, defaultAccount])\n\n    return (\n        <div className='p-4 bg-white  rounded-xl border border-gray-200 '>\n            \n            <table className='flex justify-center table-fixed' id={styles.eventtable}>\n                <tbody className=' table-fixed'>\n                <tr className='table-fixed' key='10000'>\n                    <th className='px-10'>Timestamp</th>\n                    <th className='px-10'>Transaction Hash</th>\n                    <th className='px-10'>Amount</th>\n                    \n                </tr>\n                    {Event}\n                </tbody>\n            </table>\n        </div>\n\n    );\n}\nexport default EventTable;"]},"metadata":{},"sourceType":"module"}
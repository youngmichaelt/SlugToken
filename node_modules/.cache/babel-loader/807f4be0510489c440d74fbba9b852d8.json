{"ast":null,"code":"import _asyncToGenerator from\"/Users/michaelyoung/repos/SlugToken/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/michaelyoung/repos/SlugToken/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/michaelyoung/repos/SlugToken/node_modules/@babel/runtime/regenerator/index.js\";import{React,useState,useEffect}from'react';import{ethers}from'ethers';import styles from'./Wallet.module.css';// import simple_token_abi from './Contracts/simple_token_abi.json'\nimport Interactions from'./Interactions';import ErrorModal from'./ErrorModal';import token_abi from'./contracts/abi.json';import EventTable from'./EventTable';// import NavBar from './NavBar';\nimport NavBar from'./NavBar-app.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wallet=function Wallet(){var contractAddress=\"0x290Aa71b3e2A0ce00CeD0b2178985114a66B8e36\";var _useState=useState(\"Token\"),_useState2=_slicedToArray(_useState,2),tokenName=_useState2[0],setTokenName=_useState2[1];var _useState3=useState(\"Connect Wallet\"),_useState4=_slicedToArray(_useState3,2),connButtonText=_useState4[0],setConnButtonText=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),defaultAccount=_useState6[0],setDefaultAccount=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],_setErrorMessage=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),balance=_useState10[0],setBalance=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),provider=_useState12[0],setProvider=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),signer=_useState14[0],setSigner=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),contract=_useState16[0],setContract=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),modalOpen=_useState18[0],setModalOpen=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),ethersUpdated=_useState20[0],setEthersUpdated=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),network=_useState22[0],setNetwork=_useState22[1];var checkIfWalletIsConnected=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _window,ethereum,accounts,account;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_window=window,ethereum=_window.ethereum;if(!ethereum){console.log(\"Use Metamask!\");}else{console.log(\"Ethereum object found\",ethereum);//   detailsOn();\n}_context.next=5;return ethereum.request({method:'eth_requestAccounts'});case 5:accounts=_context.sent;console.log(accounts);if(accounts.length!=0){// if(accounts[0] != defaultAccount){\n//     setConnButtonText('Not Connected');\n// } else {\naccount=accounts[0];console.log(\"Found an authorized account \",account);setDefaultAccount(account);updateEthers();setConnButtonText('Connected');// }\n//   detailsOn();\n}else{console.log(\"Could not find an authorized account\");setConnButtonText('Not Connected');}_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);_setErrorMessage(_context.t0);setModalOpen(true);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function checkIfWalletIsConnected(){return _ref.apply(this,arguments);};}();var connectWalletHandler=function connectWalletHandler(){if(window.ethereum&&window.ethereum.isMetaMask){window.ethereum.request({method:'eth_requestAccounts'}).then(function(result){// console.log(result)\naccountChangedHandler(result[0]);setConnButtonText('Connected');}).catch(function(error){console.log(error);_setErrorMessage(error.message);setModalOpen(true);});}else{console.log(\"Please install metamask\");_setErrorMessage(\"Please install metamask\");setModalOpen(true);}};var accountChangedHandler=function accountChangedHandler(newAddress){if(newAddress instanceof Array){setDefaultAccount(newAddress[0]);}else{setDefaultAccount(newAddress);}updateEthers();};var updateEthers=function updateEthers(){var tempProvider=new ethers.providers.Web3Provider(window.ethereum);var tempSigner=tempProvider.getSigner();var tempContract=new ethers.Contract(contractAddress,token_abi,tempSigner);setProvider(tempProvider);setSigner(tempSigner);setContract(tempContract);};var chainChangedHandler=function chainChangedHandler(){// reload the page to avoid any errors with chain change mid use of application\nwindow.location.reload();};if(window.ethereum){// listen for account changes\nwindow.ethereum.on('accountsChanged',accountChangedHandler);window.ethereum.on('chainChanged',chainChangedHandler);}function toFixed(x){if(Math.abs(x)<1.0){var e=parseInt(x.toString().split('e-')[1]);if(e){x*=Math.pow(10,e-1);x='0.'+new Array(e).join('0')+x.toString().substring(2);}}else{var e=parseInt(x.toString().split('+')[1]);if(e>20){e-=20;x/=Math.pow(10,e);x+=new Array(e+1).join('0');}}return x;}var getNetwork=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var n;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return provider.getNetwork(1);case 2:n=_context2.sent;console.log(n.name);setNetwork(n.name);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getNetwork(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(defaultAccount==null&&window.ethereum&&window.ethereum.isMetaMask){checkIfWalletIsConnected();}getNetwork();//checkIfWalletIsConnected();\n// if (contract != null){\n//     updateBalance();\n//     updateTokenName();\n// } \n},[contract,defaultAccount,window.ethereum,network]);var props={contract:contract,defaultAccount:defaultAccount,provider:provider,setOpenModal:function setOpenModal(x){setModalOpen(x);},setErrorMessage:function setErrorMessage(x){_setErrorMessage(x);},network:network};var modal_props={contract:contract,defaultAccount:defaultAccount,provider:provider,setOpenModal:function setOpenModal(x){setModalOpen(x);},ErrorMessage:errorMessage};return/*#__PURE__*/_jsxs(\"div\",{className:\" bg-[url('/src/slugpcopy.png')]  md:bg-cover bg-no-repeat bg-center md:bg-top w-screen h-screen scroll  justify-center  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"justify-end flex relative\",children:[/*#__PURE__*/_jsx(NavBar,{className:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start max-w-[300px] p-2 pt-5 absolute left-0\",children:/*#__PURE__*/_jsx(\"img\",{src:require('./title.png'),className:\" md:bg-cover bg-no-repeat bg-center\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bottom-3 left-3 absolute bg-white pixel-border\",id:styles.connectWalletButtton,onClick:connectWalletHandler,children:connButtonText}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"xl:mt-[135px] lg:mt-[135px]  md:mt-[125px]  sm:mt-[100px] mt-[90px] xl:text-2xl lg:text-2xl md:text-2xl sm:text-2xl text-xl  \",id:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-7 \",children:/*#__PURE__*/_jsx(Interactions,{contract:props})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-3\",children:modalOpen&&/*#__PURE__*/_jsx(ErrorModal,{setOpenModal:modal_props})}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-10\"}),/*#__PURE__*/_jsx(\"div\",{className:\"justify-center flex items-center \",children:/*#__PURE__*/_jsx(\"h3\",{className:\"mb-5 pixel-border bg-white border px-30 justify-center flex items-center text-2xl\",children:\"Recent Taxes Collected\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 mb-[150px] flex items-center justify-center \",children:/*#__PURE__*/_jsx(EventTable,{contract:props})})]})})]});};export default Wallet;","map":{"version":3,"sources":["/Users/michaelyoung/repos/SlugToken/src/Wallet.js"],"names":["React","useState","useEffect","ethers","styles","Interactions","ErrorModal","token_abi","EventTable","NavBar","Wallet","contractAddress","tokenName","setTokenName","connButtonText","setConnButtonText","defaultAccount","setDefaultAccount","errorMessage","setErrorMessage","balance","setBalance","provider","setProvider","signer","setSigner","contract","setContract","modalOpen","setModalOpen","ethersUpdated","setEthersUpdated","network","setNetwork","checkIfWalletIsConnected","window","ethereum","console","log","request","method","accounts","length","account","updateEthers","connectWalletHandler","isMetaMask","then","result","accountChangedHandler","catch","error","message","newAddress","Array","tempProvider","providers","Web3Provider","tempSigner","getSigner","tempContract","Contract","chainChangedHandler","location","reload","on","toFixed","x","Math","abs","e","parseInt","toString","split","pow","join","substring","getNetwork","n","name","props","setOpenModal","modal_props","ErrorMessage","require","connectWalletButtton","container"],"mappings":"8WACA,OAAQA,KAAR,CAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,MAAR,KAAqB,QAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA;AACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,sBAAtB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA;AACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,C,wFAIA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CAEjB,GAAMC,CAAAA,eAAe,CAAG,4CAAxB,CAEA,cAAkCV,QAAQ,CAAC,OAAD,CAA1C,wCAAOW,SAAP,eAAkBC,YAAlB,eACA,eAA4CZ,QAAQ,CAAC,gBAAD,CAApD,yCAAOa,cAAP,eAAuBC,iBAAvB,eACA,eAA4Cd,QAAQ,CAAC,IAAD,CAApD,yCAAOe,cAAP,eAAuBC,iBAAvB,eACA,eAAwChB,QAAQ,CAAC,IAAD,CAAhD,yCAAOiB,YAAP,eAAqBC,gBAArB,eACA,eAA8BlB,QAAQ,EAAtC,0CAAOmB,OAAP,gBAAgBC,UAAhB,gBAEA,gBAAgCpB,QAAQ,CAAC,IAAD,CAAxC,2CAAOqB,QAAP,gBAAiBC,WAAjB,gBACA,gBAA4BtB,QAAQ,CAAC,IAAD,CAApC,2CAAOuB,MAAP,gBAAeC,SAAf,gBACA,gBAAgCxB,QAAQ,CAAC,IAAD,CAAxC,2CAAOyB,QAAP,gBAAiBC,WAAjB,gBAEA,gBAAkC1B,QAAQ,EAA1C,2CAAO2B,SAAP,gBAAkBC,YAAlB,gBACA,gBAA0C5B,QAAQ,CAAC,KAAD,CAAlD,2CAAO6B,aAAP,gBAAsBC,gBAAtB,gBAEA,gBAA8B9B,QAAQ,CAAC,IAAD,CAAtC,2CAAO+B,OAAP,gBAAgBC,UAAhB,gBAIA,GAAMC,CAAAA,wBAAwB,0FAAG,iMAEJC,MAFI,CAEjBC,QAFiB,SAEjBA,QAFiB,CAIzB,GAAG,CAACA,QAAJ,CAAa,CACXC,OAAO,CAACC,GAAR,CAAY,eAAZ,EACD,CAFD,IAEM,CACJD,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAqCF,QAArC,EACF;AACC,CATwB,sBAWFA,CAAAA,QAAQ,CAACG,OAAT,CAAiB,CAACC,MAAM,CAAE,qBAAT,CAAjB,CAXE,QAWnBC,QAXmB,eAYzBJ,OAAO,CAACC,GAAR,CAAYG,QAAZ,EACA,GAAGA,QAAQ,CAACC,MAAT,EAAmB,CAAtB,CAAwB,CACpB;AACA;AACA;AACUC,OAJU,CAIAF,QAAQ,CAAC,CAAD,CAJR,CAKhBJ,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CK,OAA5C,EACA1B,iBAAiB,CAAC0B,OAAD,CAAjB,CACAC,YAAY,GACZ7B,iBAAiB,CAAC,WAAD,CAAjB,CACJ;AAEJ;AAEC,CAbD,IAaM,CACJsB,OAAO,CAACC,GAAR,CAAY,sCAAZ,EACAvB,iBAAiB,CAAC,eAAD,CAAjB,CACD,CA7BwB,iFA+BzBsB,OAAO,CAACC,GAAR,cACAnB,gBAAe,aAAf,CACAU,YAAY,CAAC,IAAD,CAAZ,CAjCyB,qEAAH,kBAAxBK,CAAAA,wBAAwB,0CAA9B,CAqCA,GAAMW,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CAC/B,GAAIV,MAAM,CAACC,QAAP,EAAmBD,MAAM,CAACC,QAAP,CAAgBU,UAAvC,CAAkD,CAE9CX,MAAM,CAACC,QAAP,CAAgBG,OAAhB,CAAwB,CAACC,MAAM,CAAE,qBAAT,CAAxB,EACCO,IADD,CACM,SAAAC,MAAM,CAAI,CACZ;AACAC,qBAAqB,CAACD,MAAM,CAAC,CAAD,CAAP,CAArB,CACAjC,iBAAiB,CAAC,WAAD,CAAjB,CACH,CALD,EAMCmC,KAND,CAMO,SAAAC,KAAK,CAAI,CACZd,OAAO,CAACC,GAAR,CAAYa,KAAZ,EACAhC,gBAAe,CAACgC,KAAK,CAACC,OAAP,CAAf,CACAvB,YAAY,CAAC,IAAD,CAAZ,CACH,CAVD,EAYH,CAdD,IAcO,CACHQ,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACAnB,gBAAe,CAAC,yBAAD,CAAf,CACAU,YAAY,CAAC,IAAD,CAAZ,CAEH,CACJ,CArBD,CAuBA,GAAMoB,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACI,UAAD,CAC9B,CACI,GAAIA,UAAU,WAAYC,CAAAA,KAA1B,CAAgC,CAChCrC,iBAAiB,CAACoC,UAAU,CAAC,CAAD,CAAX,CAAjB,CACC,CAFD,IAEO,CACHpC,iBAAiB,CAACoC,UAAD,CAAjB,CACH,CACDT,YAAY,GACf,CARD,CAUA,GAAMA,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAEvB,GAAIW,CAAAA,YAAY,CAAG,GAAIpD,CAAAA,MAAM,CAACqD,SAAP,CAAiBC,YAArB,CAAkCtB,MAAM,CAACC,QAAzC,CAAnB,CAEA,GAAIsB,CAAAA,UAAU,CAAGH,YAAY,CAACI,SAAb,EAAjB,CAEA,GAAIC,CAAAA,YAAY,CAAG,GAAIzD,CAAAA,MAAM,CAAC0D,QAAX,CAAoBlD,eAApB,CAAqCJ,SAArC,CAAgDmD,UAAhD,CAAnB,CAEAnC,WAAW,CAACgC,YAAD,CAAX,CACA9B,SAAS,CAACiC,UAAD,CAAT,CACA/B,WAAW,CAACiC,YAAD,CAAX,CACH,CAXD,CAkBA,GAAME,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CACpC;AACA3B,MAAM,CAAC4B,QAAP,CAAgBC,MAAhB,GACA,CAHE,CAIA,GAAI7B,MAAM,CAACC,QAAX,CAAoB,CAChB;AACAD,MAAM,CAACC,QAAP,CAAgB6B,EAAhB,CAAmB,iBAAnB,CAAsChB,qBAAtC,EAEAd,MAAM,CAACC,QAAP,CAAgB6B,EAAhB,CAAmB,cAAnB,CAAmCH,mBAAnC,EAEH,CAGD,QAASI,CAAAA,OAAT,CAAiBC,CAAjB,CAAoB,CAChB,GAAIC,IAAI,CAACC,GAAL,CAASF,CAAT,EAAc,GAAlB,CAAuB,CACpB,GAAIG,CAAAA,CAAC,CAAGC,QAAQ,CAACJ,CAAC,CAACK,QAAF,GAAaC,KAAb,CAAmB,IAAnB,EAAyB,CAAzB,CAAD,CAAhB,CACA,GAAIH,CAAJ,CAAO,CACJH,CAAC,EAAIC,IAAI,CAACM,GAAL,CAAS,EAAT,CAAaJ,CAAC,CAAG,CAAjB,CAAL,CACAH,CAAC,CAAG,KAAQ,GAAIb,CAAAA,KAAJ,CAAUgB,CAAV,CAAD,CAAeK,IAAf,CAAoB,GAApB,CAAP,CAAkCR,CAAC,CAACK,QAAF,GAAaI,SAAb,CAAuB,CAAvB,CAAtC,CACF,CACH,CAND,IAMO,CACJ,GAAIN,CAAAA,CAAC,CAAGC,QAAQ,CAACJ,CAAC,CAACK,QAAF,GAAaC,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,CAAD,CAAhB,CACA,GAAIH,CAAC,CAAG,EAAR,CAAY,CACTA,CAAC,EAAI,EAAL,CACAH,CAAC,EAAIC,IAAI,CAACM,GAAL,CAAS,EAAT,CAAaJ,CAAb,CAAL,CACAH,CAAC,EAAK,GAAIb,CAAAA,KAAJ,CAAUgB,CAAC,CAAG,CAAd,CAAD,CAAmBK,IAAnB,CAAwB,GAAxB,CAAL,CACF,CACH,CACD,MAAOR,CAAAA,CAAP,CACF,CACD,GAAMU,CAAAA,UAAU,2FAAG,qKACDvD,CAAAA,QAAQ,CAACuD,UAAT,CAAoB,CAApB,CADC,QACZC,CADY,gBAEhBzC,OAAO,CAACC,GAAR,CAAYwC,CAAC,CAACC,IAAd,EACA9C,UAAU,CAAC6C,CAAC,CAACC,IAAH,CAAV,CAHgB,wDAAH,kBAAVF,CAAAA,UAAU,2CAAhB,CAMA3E,SAAS,CAAC,UAAM,CACb,GAAIc,cAAc,EAAI,IAAlB,EAA0BmB,MAAM,CAACC,QAAjC,EAA6CD,MAAM,CAACC,QAAP,CAAgBU,UAAjE,CAA4E,CACxEZ,wBAAwB,GAE3B,CACD2C,UAAU,GACV;AACA;AAEA;AACA;AACA;AACH,CAZS,CAYP,CAACnD,QAAD,CAAWV,cAAX,CAA2BmB,MAAM,CAACC,QAAlC,CAA4CJ,OAA5C,CAZO,CAAT,CAcA,GAAIgD,CAAAA,KAAK,CAAG,CACRtD,QAAQ,CAAEA,QADF,CAERV,cAAc,CAAEA,cAFR,CAGRM,QAAQ,CAAEA,QAHF,CAIR2D,YAAY,CAAE,sBAACd,CAAD,CAAO,CAACtC,YAAY,CAACsC,CAAD,CAAZ,CAAgB,CAJ9B,CAKRhD,eAAe,CAAE,yBAACgD,CAAD,CAAO,CAAChD,gBAAe,CAACgD,CAAD,CAAf,CAAmB,CALpC,CAMRnC,OAAO,CAAEA,OAND,CAAZ,CAUA,GAAIkD,CAAAA,WAAW,CAAG,CACfxD,QAAQ,CAAEA,QADK,CAEfV,cAAc,CAAEA,cAFD,CAGfM,QAAQ,CAAEA,QAHK,CAIf2D,YAAY,CAAE,sBAACd,CAAD,CAAO,CAACtC,YAAY,CAACsC,CAAD,CAAZ,CAAgB,CAJvB,CAKfgB,YAAY,CAAEjE,YALC,CAAlB,CASD,mBAGA,aAAK,SAAS,CAAC,0HAAf,wBAKI,aAAK,SAAS,CAAC,2BAAf,wBACI,KAAC,MAAD,EAAQ,SAAS,CAAC,EAAlB,EADJ,cAEI,YAAK,SAAS,CAAC,2DAAf,uBACQ,YAAK,GAAG,CAAEkE,OAAO,CAAC,aAAD,CAAjB,CAAkC,SAAS,CAAC,qCAA5C,EADR,EAFJ,GALJ,cAaI,eAAQ,SAAS,CAAC,oDAAlB,CAAuE,EAAE,CAAEhF,MAAM,CAACiF,oBAAlF,CAAwG,OAAO,CAAExC,oBAAjH,UAAwI/B,cAAxI,EAbJ,cAkBI,kCAOI,aAAK,SAAS,CAAC,+HAAf,CAA+I,EAAE,CAAEV,MAAM,CAACkF,SAA1J,wBAEI,YAAK,SAAS,CAAC,wCAAf,uBAEA,KAAC,YAAD,EAAc,QAAQ,CAAEN,KAAxB,EAFA,EAFJ,cAMI,YAAK,SAAS,CAAC,uCAAf,UACKpD,SAAS,eAAI,KAAC,UAAD,EAAY,YAAY,CAAEsD,WAA1B,EADlB,EANJ,cAWI,WAAI,SAAS,CAAC,OAAd,EAXJ,cAYI,YAAK,SAAS,CAAC,mCAAf,uBACI,WAAI,SAAS,CAAC,mFAAd,oCADJ,EAZJ,cAeI,YAAK,SAAS,CAAC,mDAAf,uBACA,KAAC,UAAD,EAAY,QAAQ,CAAEF,KAAtB,EADA,EAfJ,GAPJ,EAlBJ,GAHA,CAwEH,CA1PD,CA4PA,cAAetE,CAAAA,MAAf","sourcesContent":["\nimport {React, useState, useEffect} from 'react'\nimport {ethers} from 'ethers'\nimport styles from './Wallet.module.css'\n// import simple_token_abi from './Contracts/simple_token_abi.json'\nimport Interactions from './Interactions';\nimport ErrorModal from './ErrorModal';\nimport token_abi from './contracts/abi.json'\n\nimport EventTable from './EventTable';\n// import NavBar from './NavBar';\nimport NavBar from './NavBar-app.js';\n\n\n\nconst Wallet = () => {\n\n    const contractAddress = \"0x290Aa71b3e2A0ce00CeD0b2178985114a66B8e36\";\n\n    const [tokenName, setTokenName] = useState(\"Token\");\n    const [connButtonText, setConnButtonText] = useState(\"Connect Wallet\");\n    const [defaultAccount, setDefaultAccount] = useState(null);\n    const [errorMessage, setErrorMessage] = useState(null);\n    const [balance, setBalance] = useState();\n\n    const [provider, setProvider] = useState(null);\n    const [signer, setSigner] = useState(null);\n    const [contract, setContract] = useState(null);\n\n    const [modalOpen, setModalOpen] = useState();\n    const [ethersUpdated, setEthersUpdated] = useState(false);\n\n    const [network, setNetwork] = useState(null);\n\n\n    \n    const checkIfWalletIsConnected = async () => {\n        try{\n            const { ethereum } = window;\n      \n            if(!ethereum){\n              console.log(\"Use Metamask!\");\n            } else{\n              console.log(\"Ethereum object found\", ethereum);\n            //   detailsOn();\n            }\n      \n            const accounts = await ethereum.request({method: 'eth_requestAccounts'});\n            console.log(accounts)\n            if(accounts.length != 0){\n                // if(accounts[0] != defaultAccount){\n                //     setConnButtonText('Not Connected');\n                // } else {\n                    const account = accounts[0];\n                    console.log(\"Found an authorized account \", account);\n                    setDefaultAccount(account);\n                    updateEthers();\n                    setConnButtonText('Connected');\n                // }\n              \n            //   detailsOn();\n    \n            } else{\n              console.log(\"Could not find an authorized account\");\n              setConnButtonText('Not Connected');\n            }\n          } catch(error){\n            console.log(error);\n            setErrorMessage(error);\n            setModalOpen(true);\n          }\n    }\n\n    const connectWalletHandler = () => {\n        if (window.ethereum && window.ethereum.isMetaMask){\n\n            window.ethereum.request({method: 'eth_requestAccounts'})\n            .then(result => {\n                // console.log(result)\n                accountChangedHandler(result[0]);\n                setConnButtonText('Connected');\n            })\n            .catch(error => {\n                console.log(error)\n                setErrorMessage(error.message);\n                setModalOpen(true);\n            })\n\n        } else {\n            console.log(\"Please install metamask\");\n            setErrorMessage(\"Please install metamask\");\n            setModalOpen(true);\n\n        }\n    }\n\n    const accountChangedHandler = (newAddress) =>\n    {\n        if (newAddress instanceof Array){\n        setDefaultAccount(newAddress[0]);\n        } else {\n            setDefaultAccount(newAddress);\n        }\n        updateEthers();\n    }\n\n    const updateEthers = () => {\n       \n        let tempProvider = new ethers.providers.Web3Provider(window.ethereum);\n\n        let tempSigner = tempProvider.getSigner();\n\n        let tempContract = new ethers.Contract(contractAddress, token_abi, tempSigner);\n\n        setProvider(tempProvider);\n        setSigner(tempSigner);\n        setContract(tempContract);\n    }\n\n    \n\n    \n\n    \n    const chainChangedHandler = () => {\n\t\t// reload the page to avoid any errors with chain change mid use of application\n\t\twindow.location.reload();\n\t}\n    if (window.ethereum){\n        // listen for account changes\n        window.ethereum.on('accountsChanged', accountChangedHandler);\n\n        window.ethereum.on('chainChanged', chainChangedHandler);\n\n    }\n\t\n\n    function toFixed(x) {\n        if (Math.abs(x) < 1.0) {\n           var e = parseInt(x.toString().split('e-')[1]);\n           if (e) {\n              x *= Math.pow(10, e - 1);\n              x = '0.' + (new Array(e)).join('0') + x.toString().substring(2);\n           }\n        } else {\n           var e = parseInt(x.toString().split('+')[1]);\n           if (e > 20) {\n              e -= 20;\n              x /= Math.pow(10, e);\n              x += (new Array(e + 1)).join('0');\n           }\n        }\n        return x;\n     }\n     const getNetwork = async () => {\n        let n =  await provider.getNetwork(1);\n        console.log(n.name);\n        setNetwork(n.name);\n    }\n\n     useEffect(() => {\n        if (defaultAccount == null && window.ethereum && window.ethereum.isMetaMask){\n            checkIfWalletIsConnected();\n            \n        }\n        getNetwork();\n        //checkIfWalletIsConnected();\n        // if (contract != null){\n            \n        //     updateBalance();\n        //     updateTokenName();\n        // } \n    }, [contract, defaultAccount, window.ethereum, network])\n\n     let props = {\n         contract: contract,\n         defaultAccount: defaultAccount,\n         provider: provider,\n         setOpenModal: (x) => {setModalOpen(x)},\n         setErrorMessage: (x) => {setErrorMessage(x)},\n         network: network\n\n     }\n\n     let modal_props = {\n        contract: contract,\n        defaultAccount: defaultAccount,\n        provider: provider,\n        setOpenModal: (x) => {setModalOpen(x)},\n        ErrorMessage: errorMessage\n        \n     }\n\n    return (\n\n        \n    <div className=\" bg-[url('/src/slugpcopy.png')]  md:bg-cover bg-no-repeat bg-center md:bg-top w-screen h-screen scroll  justify-center  \">\n        {/* <div className='justify-end flex '>\n                    <NavBar className=''/>\n                    \n        </div> */}\n        <div className='justify-end flex relative'>\n            <NavBar className=''/>\n            <div className='flex justify-start max-w-[300px] p-2 pt-5 absolute left-0'>\n                    <img src={require('./title.png')} className=' md:bg-cover bg-no-repeat bg-center'/>\n\n                </div>\n            {/* <h3 id={styles.header} className=''>Slug Token</h3> */}\n        </div>\n        <button className='p-2 bottom-3 left-3 absolute bg-white pixel-border' id={styles.connectWalletButtton} onClick={connectWalletHandler}>{connButtonText}</button>\n\n\n        \n        \n        <div>\n            \n            {/* <div>\n                <h3>Address: {defaultAccount}</h3>\n            </div> */}                \n\n\n            <div className='xl:mt-[135px] lg:mt-[135px]  md:mt-[125px]  sm:mt-[100px] mt-[90px] xl:text-2xl lg:text-2xl md:text-2xl sm:text-2xl text-xl  ' id={styles.container}>\n                \n                <div className='flex items-center justify-center mb-7 '>\n                    \n                <Interactions contract={props}/>\n                </div>\n                <div className='flex items-center justify-center mb-3'>\n                    {modalOpen && <ErrorModal setOpenModal={modal_props}></ErrorModal>}\n\n                </div>\n\n                <hr className='my-10'/>\n                <div className='justify-center flex items-center '>\n                    <h3 className='mb-5 pixel-border bg-white border px-30 justify-center flex items-center text-2xl'>Recent Taxes Collected</h3>\n                </div>\n                <div className='mt-2 mb-[150px] flex items-center justify-center '>\n                <EventTable contract={props}/>\n                </div>\n                \n                \n\n\n\n                {/* <EventTable contract={props}/> */}\n            </div>\n\n            {/* <button\n        className=\"openModalBtn\"\n        onClick={() => {\n          setModalOpen(true);\n        }}\n      >\n        ERROR TEST\n      </button> */}\n          \n\n            \n            \n            {/* <p>{errorMessage}</p> */}\n        </div>\n\n    </div>\n\n    );\n}\n\nexport default Wallet;\n"]},"metadata":{},"sourceType":"module"}